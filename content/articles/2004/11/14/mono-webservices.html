--- 
kind: article
created_at: 2004-11-14 05:17:00 +00:00
title: Mono WebServices
tags: 
- Uncategorized
---

<p>Whilst converting fellow <a href="http://www.cumbria.lug.org.uk/"><span class="caps">CLUG</span>&#8217;er</a> Mark to Mono (on Windows no less!) last night, I decided to revisit my <a href="/entries/19/">promise</a> to publish my &#8216;Hello&#8217; web service. Whilst chatting to him, I re-coded it as a Mono <span class="caps">ASP</span>.NET Web Service which can be seen <a href="/wip/HelloWorld.asmx">here</a>.</p>


	<h3>Writing the Web Service</h3>


	<p>My web service &#8216;page&#8217; consists of one line:</p>


<pre>
 &lt;%@ WebService Language="c#" Class="Schwuk.HelloWorld" %&gt;
</pre>

	<p>Whilst my web service &#8216;logic&#8217; (code behind as usual) consists of:</p>


<pre>
 using System;
 using System.Web.Services;

 namespace Schwuk
 {

 [WebService(Namespace="http://schwuk.com",Description="Very simple test webservice")]
         public class HelloWorld : System.Web.Services.WebService
         {
                 [WebMethod(Description="Says Hello")]
                 public string SayHello(string Name)
                 {
                         return String.Format("Hello {0}", Name);
                 }
         }
 }
</pre>

	<p>This is compiled with:</p>


<pre>
 $ mcs -t:library -r:System.Web.Services -out:bin/HelloWorld.dll HelloWorld.cs
</pre>

	<h3>Consuming the Web Service</h3>


	<p>The easiest way to consume the web service is to use it&#8217;s <acronym title="Web Services Description Language">WSDL</acronym> file (you can find mine <a href="/wip/HelloWorld.asmx?wsdl">here</a>) to create a proxy client.</p>


	<p>You&#8217;ve got two ways of doing this from Mono/.NET:</p>


	<ol>
	<li>Use the <a href="/wip/HelloWorld.asmx?page=proxy">proxy</a> client generated by the web service itself</li>
		<li>Generate a proxy client using the <span class="caps">WSDL</span> tool</li>
	</ol>


	<p>Since the first option is pretty self explanatory, I&#8217;ll quickly demonstrate the second option.</p>


<pre>
 $ wsdl -n:Schwuk http://schwuk.com/wip/HelloWorld.asmx?wsdl
</pre>

	<p>This generates a <code>HelloWorld.cs</code> file that can be included in your project. I specify a namespace with the <code>-n:</code> option, but that&#8217;s optional.</p>


	<h3>Demonstrating the Web Service</h3>


	<p>I re-implemented my original HelloWorld app as HelloWorldClient using this new web service. You can grab the MonoDevelop project <a href="/wip/HelloWorldClient-Source.tar.gz">here</a> or the client itself in the following forms:</p>


	<ul>
	<li><a href="/wip/HelloWorldClient.exe">Executable</a></li>
		<li><a href="/wip/HelloWorldClient.tar.gz">Tarball</a></li>
		<li><a href="/wip/HelloWorldClient.zip">Zip</a></li>
	</ul>


	<p>Here it is running on Linux:</p>


<txp:image id="15" />

	<p>and here running on XP (courtesy of Mark):</p>


<txp:image id="16" />

	<p>This is the <strong>same</strong> executable &#8211; no recompilation was required.</p>